---
title: "Breaking Changes & Migrations"
description: "A focused page listing any breaking changes—such as updated command-line options, logging behaviors, or hardware support modifications—that may require users to adapt scripts, deployment infrastructure, or usage patterns."
---

# Breaking Changes & Migrations

This page details the breaking changes introduced in recent Buildroot versions that impact users of ShredOS, highlighting updated command-line options, changes in logging behavior, and modifications in hardware support that require adaptations to scripts, deployment setups, or usage workflows.

---

## 1. Overview of Breaking Changes

Buildroot evolves with frequent updates that can remove or rename packages, alter configuration symbols, or change internal build behaviors. Users integrating ShredOS based on Buildroot must stay aware of these changes to maintain compatibility and ensure smooth upgrades.

This section summarizes key breaking changes relevant to ShredOS users and integrators.

### 1.1 Removed and Renamed Packages

- Several packages have been deprecated or removed due to lack of maintenance or upstream obsolescence, including notable ones like `bsdiff`, `popperjs` (renamed to `floating-ui`), `midori`, `frotz`, and `beecrypt`.
- Key package renames affecting dependencies and build configurations include:
  - `davinci-bootcount` renamed to `uboot-bootcount`.
  - `python-crossbar` removed; no longer Python 3.12 compatible.
  - `onevpl-intel-gpu` renamed to `intel-vpl-gpu-rt`.
  - Shadow utilities such as `shadow- utmpx` removed.
  - OpenSSL option `libopenssl-rc5` was never enabled and is removed.
  - BlueZ4 utilities replaced by `bluez5-utils`.
- Support for package variants for old architectures such as `nds32`, `sh2a`, `csky`, and `blackfin` has been removed due to upstream kernel and toolchain discontinuation.

### 1.2 Removed or Renamed Kernel and Toolchain Options

- Linux kernel headers versions older than 6.2.x and various intermediate releases (4.x and 5.x series) are no longer supported. Users must upgrade to supported kernel header versions.
- Certain architecture support was dropped, e.g., `x86 i386` and `knightslanding/knightsmill` AVX512 support are removed.
- Removal of legacy options like `FLAT shared binary format` and old GCC versions 4.7.x, 4.8.x, 5.x, 6.x, 7.x, 8.x, 9.x, 10.x, 11.x, and 12.x from Buildroot configurations requiring users to adopt supported newer compilers.

### 1.3 Changes in Configuration Symbols

- Buildroot configuration symbols are regularly renamed to improve clarity or consistency, e.g.,
  - `BR2_TOOLCHAIN_EXTRA_EXTERNAL_LIBS` renamed to `BR2_TOOLCHAIN_EXTRA_LIBS`.
  - Various GTK, Cairo, GStreamer, and Kodi-related configuration changes to match upstream developments.
- Removal of deprecated or obsolete features requiring disabling legacy options in existing configurations.

### 1.4 Buildroot Downloads and Downloads Handling

- From Buildroot 2023.11 onward, Subversion externals are no longer retrieved by default unless explicitly enabled by setting `LIBFOO_SVN_EXTERNALS=YES` in package recipes.
- Archive suffixes for generated sources have been updated to new formats like `-git4`, `-svn5`, `-cargo2`, `-go2` to reflect improved reproducibility and backend changes.
- Minimum tar version required is now 1.35 due to archive format changes, affecting builds with locally generated tarballs.

### 1.5 Other Notable Breaking Changes

- The `Buildroot` internal host directory no longer contains a `usr/` subdirectory starting from 2017.08. Host packages now install directly into `$(HOST_DIR)`, requiring package `RPATH` fixes.
- Deprecated `Buildroot` environment variables and makefile macros (e.g., `BUILDROOT_DL_DIR` renamed to `BR2_DL_DIR`, `GENTARGETS` removed) generate build-time errors when used to prevent legacy issues.
- The default is now to optimize toolchains for speed (`-O2`) instead of size (`-Os`) as per 2024.02.

---

## 2. Migration Guidance for ShredOS Users

Migration to newer Buildroot-based ShredOS releases often requires changes in build or deployment environments. This section outlines best practices for adapting your configurations and build process.

### 2.1 General Migration Approach

1. Build your existing ShredOS configuration with the old Buildroot version.
2. Generate and save size and dependency graphs (`make graph-size`) for verification.
3. Review breaking changes and update your project’s overlays, patches, and customizations accordingly.
4. Upgrade your Buildroot/ShredOS tree to the new version.
5. Run `make menuconfig` and disable all legacy options shown in the Legacy menu.
6. Rebuild all components with `make clean all` for a clean rebuild.
7. Verify that no unexpected files or dependencies are missing.
8. Update hashes and patches according to new archive suffix and download conventions.

### 2.2 Specific Version Migration Notes

- **Migrating to Buildroot 2016.11:** Br2-external trees must be assigned a unique name via an `external.desc` file. Update references to use `BR2_EXTERNAL_<NAME>_PATH` variables.

- **Migrating to 2017.08:** Host packages install to `$(HOST_DIR)` instead of `$(HOST_DIR)/usr`. Packages requiring RPATH pointing to `/lib` need to be updated to avoid `/usr/lib` in RPATH.

- **Migrating to 2023.11:** Adjust `LIBFOO_SVN_EXTERNALS` where necessary, update package hashes for the new archive suffixes `-br3`, and remove architecture-specific patches, replacing them with custom pre-patch hooks if truly needed.

- **Migrating to 2024.05:** Use `tar` 1.35 or later; update custom packages’ `.hash` files to include new suffixes like `-git4` and `-cargo2` to match updated tarball formats.

### 2.3 Adjusting Legacy Configuration Options

Buildroot provides a `Legacy` configuration menu enumerating all deprecated or removed config symbols still active. Disable these before upgrading. Using the legacy options will cause build errors.

### 2.4 Adjustments to Build Scripts and Automation

- Update scripts that reference renamed packages and configuration symbols.
- Modify automation to use updated command line options and environment variables.
- For external toolchains, ensure correct configuration after migration, especially if switching toolchain paths or versions.

### 2.5 Reviewing Buildroot Legal and Licensing Considerations

Running `make legal-info` after upgrading is important to verify compliance, as packages and licenses might have changed.

---

## 3. Handling Deprecated Features

### 3.1 Deprecated Packages Removed
- Remove references and dependencies to deprecated or removed packages such as `bsdiff`, `midori`, `cockpit`, and `python-pygame`.

### 3.2 Legacy Environment Variables and Makefile Macros
- Replace `BUILDROOT_DL_DIR` with `BR2_DL_DIR`.
- Remove use of deprecated macros like `GENTARGETS`, `AUTOTARGETS`, and switch to the current package infrastructure macros.

### 3.3 Kernel Header Version Support
- Upgrade kernel header versions; no longer support Linux kernel headers older than 6.x series.

### 3.4 Compiler Versions
- Remove support for old GCC, prefer only currently supported and default GCC versions.

---

## 4. Important Notes for ShredOS Users

- Always confirm compatibility of toolchain and kernel header versions when updating ShredOS versions backed by newer Buildroot releases.
- Use the `make savedefconfig` and store your defconfig and custom configurations as per recommended project structure under `board/<manufacturer>/<boardname>/`.
- Use root filesystem overlays and post-build scripts for customizations rather than modifying target rootfs directly.
- Test builds with `make graph-depends` and `make graph-size` to verify dependencies and package sizes.
- Incorporate the Buildroot `OVERRIDE_SRCDIR` mechanism for development ease when modifying source trees.
- Monitor for legacy config options during configuration and resolve them to avoid build failures.

---

## 5. Troubleshooting & Support

- Consult [Buildroot’s troubleshooting and common issues documentation](https://buildroot.org/downloads/manual/manual.html#_debugging_buildroot) to handle build failures resulting from migration.
- Use Buildroot mailing list, IRC channel `#buildroot` on OFTC, and [Buildroot’s GitLab issue tracker](https://gitlab.com/buildroot.org/buildroot/-/issues) for community support.
- Leverage Buildroot’s `check-package` script to validate package and configuration changes.
- Use the `test-pkg` script to verify your packages against recommended toolchains.

---

## 6. Reference Material

- Extensive package and configuration infrastructure details are available in Buildroot’s user [manual](https://buildroot.org/downloads/manual/manual.html).
- Migration steps and older version compatibility considerations are documented under the [Migrating from older Buildroot versions](https://buildroot.org/downloads/manual/manual.html#migrating-from-ol-versions).
- For details on configuring ShredOS, see: [Configuring ShredOS Options](https://docs.shredos.org/getting-started/first-use-configuration/configuring-options).
- For upgrade instructions specific to ShredOS, refer to: [Upgrade Instructions & Best Practices](https://docs.shredos.org/changelog/upgrade-guides-impact/upgrade-instructions).

---

## 7. Best Practices Before Upgrading

- Backup existing configurations and export `defconfig` files.
- Audit enabled packages for deprecated options and removed packages.
- Plan a clean rebuild after disabling legacy configs.
- Update custom patches and overlays for any renamed or removed components.
- Ensure you have the latest compatible toolchain and kernel headers.

---

## Appendix: Buildroot Legacy Support

Buildroot maintains backward compatibility scripts (`Config.in.legacy` and `Makefile.legacy`) that detect use of deprecated options or environment variables. These measures help identify legacy usage early and provide migration guidance.

Refer to those for specific legacy option warnings or build error explanations when upgrading older ShredOS versions based on Buildroot.

---

## Example: Common Legacy Configurations to Drop

Here are common deprecated config options in Buildroot that must be disabled during migration:

```plain
BR2_PACKAGE_BSDIFF
BR2_PACKAGE_MIDORI
BR2_PACKAGE_FROTZ
BR2_PACKAGE_BEECRYPT
BR2_PACKAGE_PYTHON_PYGAME
BR2_PACKAGE_GNURADIO_PAGER
BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_CDXAPARSE
BR2_GCC_VERSION_5_X
BR2_GDB_VERSION_12
BR2_PACKAGE_LIBMCRYPT
BR2_KERNEL_HEADERS_4_14
BR2_PACKAGE_DOCKER_PROXY
BR2_PACKAGE_OPENCV
BR2_PACKAGE_OPENVMTOOLS_PROCPS
BR2_TOOLCHAIN_EXTERNAL_CODESOURCERY_ARM
...
```

Always verify current `Legacy` menu during `make menuconfig` and unset all legacy options.

---

## Summary

Staying current with Buildroot’s breaking changes is essential for ShredOS users to maintain a secure, functional, and streamlined disk erasure environment. This page provides the necessary insights and step-by-step guidance for smooth migrations, helping integrate new versions with minimal disruption.

# End of Document
